# Cookie とセッションについて説明できる

## 1. ステートレス

HTTP は特徴としてステートレスであると言われます。ステートレスとは何か、プログラミング初心者にわかるように説明してください。

A. ステートレスとは、システムが前のリクエストやトランザクションの情報を保持しないという特性を指します。

つまり、それぞれのリクエストやトランザクションは独立して扱われ、前のものとの関連性はありません。

これは、システムが過去のデータや状態に依存しないで動作することを意味します。

## 2. Cookie とセッション

HTTP がステートレスであることを考えると、ログイン状態を保持することができません。しかし現実のアプリケーションではログイン状態を保持できないと大変不便です。

そこでログイン状態を保持するために Cookie とセッションが使われます。以下について説明してください。

- Cookie とセッションとはそれぞれ何か？
- Cookie とセッションの違いは？
- Cookie とセッションを利用してどのようにログイン状態を実現しているのか？

A. Cookieは、ウェブサーバがクライアントに対して送る小さなテキストファイルの一種です。

これには、ユーザーのIDや訪問履歴などの情報が保存されます。クライアントはその後のリクエストの際に、そのCookieをサーバーに送り返します。

これにより、サーバーはクライアントを識別したり、前回の訪問情報を引き継ぐことが可能になります。

セッションは、ある期間にわたる一連の関連する対話や情報交換のことを指します。

ウェブの文脈では、特定のユーザーがウェブサイトにアクセスしてから退出するまでの一連のアクティビティや状態を指すことが多いです。

セッションはサーバーサイドで管理され、一般的にはユーザーの識別情報やその他の状態情報を保持します。

Cookieとセッションの主な違いは、情報が保存される場所とその寿命です。

Cookieはクライアントサイドに情報が保存されます。サーバーはレスポンスでCookieを送信し、ブラウザはそれを保存し、後のリクエストでそれをサーバーに送信します。

Cookieには有効期限があり、期限が過ぎると自動的に削除されます。しかし、ユーザーが手動で削除しない限り、ブラウザを閉じても保持され続けます。

セッションはサーバーサイドに情報が保存されます。セッションは特定の期間（セッション時間）活動的であり、その時間が過ぎると自動的に終了します。

ブラウザを閉じると通常はセッションも終了します。

ログイン状態の保持には、通常、Cookieとセッションの両方が使われます。

ユーザーがログインすると、サーバーはそのユーザーの識別情報をセッションに保存します。次に、そのセッションに一意のID（セッションID）を割り当て、これをCookieとしてユーザーのブラウザに送信します。

ユーザーが次にページを訪れると、ブラウザはCookieの中のセッションIDをサーバーに送ります。

サーバーはそのIDを使ってセッションを見つけ、ユーザーがログインしていることを認識します。

これにより、HTTPのステートレス性を補完しつつ、ユーザーのログイン状態を保持することができます。

ただし、セキュリティ上の理由から、セッションIDは安全に扱われるべきであり、特にHTTPSを用いた安全な接続を通じて送受信されるべきです。


## 3. Cookie の確認

ブラウザで Cookie を確認してみましょう。

`www.google.com` にログインした状態でアクセスし、Cookie を確認してください。

開発ツールのNetworkタブのCookiesタブを確認する